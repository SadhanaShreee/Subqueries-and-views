# Subqueries-and-views

## AIM:
 To Study & Implementation of Sub queries Views
 
 ## THEORY:
 ```
 SUBQUERIES:
 The query within another is known as a subquery. A statement containing a subquery is called a parent
 statement. The rows returned by subquery are used by the parent statement or in other words A subquery is a
 SELECT statement that is embedded in a clause of another SELECT statement
 Youcan place the subquery in a number of SQL clauses:
 1) WHEREclause
 2) HAVINGclause
 3) FROM clause
 4) OPERATORS(IN.ANY,ALL,<,>,>=,<= etc..)
 Types:
 1.Sub queries that return several values
 Sub queries can also return more than one value. Such results should be made use along with the operators
 in and any.
 2.Multiple queries
 Here more than one subquery is used. These multiple sub queries are combined by means of
 ‘and’ & ‘or’ keywords.
 3.Correlated subquery
 A subquery is evaluated once for the entire parent statement whereas a correlated Sub query is evaluated
 once per row processed by the parent statement.
 VIEW:
 In SQL, a view is a virtual table based on the result-set of an SQL statement. A view contains rows
 and columns, just like a real table. The fields in a view are fields from one or more real tables in the
 database. You can add SQL functions, WHERE, and JOIN statements to a view and present the data as if
 the data were coming from one single table. A view is a virtual table, which consists of a set of columns
 from one or more tables. It is similar to a table but it does not store in the database. View is a query stored
 as an object
Syntax:
 CREATE VIEW
 AS
 SELECT FROMrelation_name WHERE (Condition)
 DROPPING A VIEW:
 A view can be deleted with the DROP VIEW command.
 Syntax: DROP VIEW;
```
```
Question 1:
 From the following tables, write a SQL query to find all the orders generated in New York city. Return
 ord_no, purch_amt, ord_date, customer_id and salesman_id.

Answer:
 SELECT o.ord_no, o.purch_amt, o.ord_date, o.customer_id, o.salesman_id
 FROM Orders o JOIN Salesman s
 ONo.salesman_id=s.salesman_id
 WHEREs.city='New York' ;
```
 ## Output:
 ![Screenshot 2024-11-20 142735](https://github.com/user-attachments/assets/f2e2e6de-c461-4cf7-bc7d-c58184a47116)

 ```
 Question 2:
 From the following tables, write a SQL query to find those salespeople who earned the maximum
 commission. Return ord_no, purch_amt, ord_date, and salesman_id.

 Answer:
 SELECT ord_no, purch_amt, ord_date, salesman_id
 FROM Orders
 WHERE salesman_id=(
 SELECT salesman_id
 FROM Salesman
 WHERE commission=(
 SELECT MAX(commission)
 FROM Salesman)
 );
```
## Output:
![Screenshot 2024-11-20 142751](https://github.com/user-attachments/assets/b3dfaf5c-2865-4ecc-ab1a-552c8534ba95)

```
 Question 3:
 From the following tables write a SQL query to find all orders generated by London-based salespeople.
 Return ord_no, purch_amt, ord_date, customer_id, salesman_id.

 Answer:
 SELECT o.ord_no, o.purch_amt, o.ord_date, o.customer_id, o.salesman_id
 FROM Orderso
 WHERE o.salesman_id=(
 SELECT s.salesman_id
 FROM Salesman s
 GROUPBY s.salesman_id
 HAVING city='London' AND o.salesman_id=s.salesman_id
 );
```
 ## Output:
 ![Screenshot 2024-11-20 142758](https://github.com/user-attachments/assets/7df3b97e-a756-406f-888d-dfd83b57a74b)

 ```
 Question 4:
 Write a SQL query to Identify customers whose city is different from the city of the customer with the highest
 ID

 Answer:
 SELECT id,name,city,email,phone
 FROM customer
 WHERE NO Tcity=(
 SELECT city
 FROM customer
 WHERE id=(
 SELECT MAX(id)
 FROM customer)
 );
```
## Output:
![Screenshot 2024-11-20 142805](https://github.com/user-attachments/assets/e4856dd9-46de-4ff9-899a-f0607cd760e2)

```
Question 5:
 Write a SQL query to retrieve all columns from the CUSTOMERS table for customers whose salary is greater
 than $1500.

Answer:
 SELECT *FROMcustomers
 WHEREsalary>1500;
```
 ## Output:
 ![Screenshot 2024-11-20 142812](https://github.com/user-attachments/assets/98669658-1446-4ae3-9c32-4fdd2924e6a1)

 ```
 Question 6:
 Write a SQL query that retrieves the all the columns from the Table Grades, where the grade is equal to the
 minimum grade achieved in each subject.

 Answer:
 SELECT *FROMgrades g1
 WHEREgrade=(
 SELECT MIN(grade)
 FROMgrades g2
 WHEREg1.subject=g2.subject
 );
 ```
## Output:
![Screenshot 2024-11-20 142821](https://github.com/user-attachments/assets/e589f9d5-e4e4-4620-86ac-1c0834633341)

```
 Question 7:
 From the following tables, write a SQL query to determine the commission of the salespeople in Paris. Return
 commission.

 Answer:
 SELECT s.commission
 FROMSalesman s
 WHEREs.salesman_id=(
 SELECT c.salesman_id
 FROMCustomerc
 WHEREc.city='Paris' AND s.salesman_id=c.salesman_id
 );
```
 ## Output:
 ![Screenshot 2024-11-20 142828](https://github.com/user-attachments/assets/1e032df4-3fe8-4a37-91fc-629a2f9fee01)

 ```
 Question 8:
 From the following tables write a SQL query to find salespeople who had more than one customer. Return
 salesman_id and name.

 Answer:
 SELECT s.salesman_id,s.name
 FROM Salesman s
 WHERE s.salesman_id=(
 SELECT s.salesman_id
 FROM Customer c
 WHERE(
 SELECT COUNT(c2.customer_id)
 FROM Customer c2
 WHERE s.salesman_id=c2.salesman_id)>1
 );
 ```
## Output:
![Screenshot 2024-11-20 142835](https://github.com/user-attachments/assets/aa3d0324-d19c-4a58-828a-495f2f8fa8be)

```
 Question 9:
 Write a SQL query to List departments with names longer than the average length

 Answer:
 SELECT department_id AS depar , department_name
 FROM Departments
 WHERE department_id=(
 SELECT department_id
 FROM Departments
 WHERE(
 SELECT AVG(LENGTH(Department_name))
 FROM Departments)<LENGTH(Department_name)
 );
```
 ## Output:
 ![Screenshot 2024-11-20 142842](https://github.com/user-attachments/assets/9b7ce289-9132-4bc2-97db-a87c4dc795d9)

 ```
 Question 10:
 Write a SQL query to Retrieve the medications with dosages equal to the lowest dosage

 Answer:
 SELECT medication_id,medication_name,dosage
 FROM Medications
 WHERE dosage=(
 SELECT MIN(dosage)
 FROM Medications
 );
 ```
## Output:
![Screenshot 2024-11-20 142850](https://github.com/user-attachments/assets/6b9b925d-2c48-469b-b0b1-b59f40f1f12a)


## Result:
 Thus , the SQL queries to implement Sub queries Views have been executed successfully.

